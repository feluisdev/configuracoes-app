{"type":"component","scope":"page","pagePath":"(configuracoes)/tipos-servicos","pageName":"tiposServicos","description":"TipoServicoFormComp","name":"TipoServicoForm","id":"2rmvkubsav","args":[{"id":"1","name":"id","type":"string","isList":false,"isOptional":true,"isInterface":false,"isFunction":false,"isState":false,"functionParameters":[]},{"id":"2","name":"onSuvmit","type":"boolean","isList":false,"isOptional":false,"isInterface":false,"isFunction":false,"isState":false,"functionParameters":[]},{"id":"3","name":"afterSubmit","type":"void","isList":false,"isOptional":false,"isInterface":false,"isFunction":true,"isState":false,"functionParameters":[]}],"types":[{"componentId":"form_tipoServico","name":"formTipoServico","path":"","fields":[{"componentId":"nome_ts","name":"nome","type":"string","required":false,"defaultValue":""},{"componentId":"codigo_ts","name":"codigo","type":"string","required":false,"defaultValue":""},{"componentId":"categoriaId_ts","name":"categoriaId","type":"string","required":false,"defaultValue":""},{"componentId":"descricao_ts","name":"descricao","type":"string","required":false,"defaultValue":""},{"componentId":"prazoEstimado_ts","name":"prazoEstimado","type":"number","required":false,"defaultValue":""},{"componentId":"valorBase_ts","name":"valorBase","type":"number","required":false,"defaultValue":""},{"componentId":"requerVistoria_ts","name":"requerVistoria","type":"boolean","required":false,"defaultValue":""},{"componentId":"requerAnaliseTec_ts","name":"requerAnaliseTec","type":"boolean","required":false,"defaultValue":""},{"componentId":"requerAprovacao_ts","name":"requerAprovacao","type":"boolean","required":false,"defaultValue":""},{"componentId":"disponivelPortal_ts","name":"disponivelPortal","type":"boolean","required":false,"defaultValue":""},{"componentId":"ativo_ts","name":"ativo","type":"boolean","required":false,"defaultValue":""}]}],"states":[],"functions":[{"id":"fnc_CiLok7","name":"handleSubmit","code":" try {\r\n    // Preparar os dados para envio\r\n    const tipoServicoData = {\r\n      nome: values.nome || '',\r\n      codigo: values.codigo || '',\r\n      categoriaId: values.categoriaId || '',\r\n      descricao: values.descricao,\r\n      prazoEstimado: values.prazoEstimado,\r\n      valorBase: values.valorBase,\r\n      requerVistoria: values.requerVistoria,\r\n      requerAnaliseTec: values.requerAnaliseTec,\r\n      requerAprovacao: values.requerAprovacao,\r\n      disponivelPortal: values.disponivelPortal,\r\n      ativo: values.ativo !== undefined ? values.ativo : true\r\n    };\r\n\r\n    if (id) {\r\n      // Modo de edição - atualizar tipo de serviço existente\r\n      await updateTipoServicoMutation.mutateAsync({\r\n        id,\r\n        data: tipoServicoData\r\n      });\r\n      igrpToast({ type: 'success', title: 'Tipo de serviço atualizado com sucesso!' });\r\n    } else {\r\n      // Modo de criação - criar novo tipo de serviço\r\n      await createTipoServicoMutation.mutateAsync(tipoServicoData);\r\n      igrpToast({ type: 'success', title: 'Tipo de serviço criado com sucesso!' });\r\n    }\r\n  } catch (error) {\r\n    console.error('Erro ao salvar tipo de serviço:', error);\r\n    igrpToast({ type: 'error', title: `Erro ao ${id ? 'atualizar' : 'criar'} tipo de serviço. Por favor, tente novamente.` });\r\n  }","returnValue":{"type":"void","isNullable":true,"isList":false},"imports":[{"id":"import_dwd7Qz","namespace":"import { useTiposServicos } from '@/app/[locale]/(myapp)/hooks/use-tipos-servicos'"},{"id":"import_UeDeJR","namespace":"import { useCategorias } from '@/app/[locale]/(myapp)/hooks/use-categorias'"}],"isAsync":true,"arguments":[{"id":"1","name":"values","type":"z.infer<any>","isList":false,"isOptional":false,"isInterface":false,"isFunction":false,"isState":false,"functionParameters":[]}]}],"imports":[],"components":{"id":"component_tipoServicoForm","componentName":"component","label":"TipoServicoForm","type":"group","tag":"componentTipoServicoForm","properties":{"commonProperties":{"generateReference":false}},"data":{},"interactions":{"onLoad":{"type":"function","function":{"type":"function","fnCustomCode":{"imports":[{"namespace":"import {getTipoServicoById} from '@/app/[locale]/(myapp)/hooks/use-tipos-servicos'","id":"6djttfch8r"}],"fnCode":"useEffect(() => {\r\n   const loadTipoServico = async () => {\r\n    if (id) {\r\n      try {\r\n        const tipoServico = await getTipoServicoById(id);\r\n        \r\n        // Mapear os dados do tipo de serviço para o formulário\r\n        setFormTipoServicoData({\r\n          nome: tipoServico.nome,\r\n          codigo: tipoServico.codigo,\r\n          categoriaId: tipoServico.categoria?.categoriaId || tipoServico.idCategoria,\r\n          descricao: tipoServico.descricao,\r\n          prazoEstimado: tipoServico.prazoEstimado,\r\n          valorBase: tipoServico.valorBase,\r\n          requerVistoria: tipoServico.requerVistoria,\r\n          requerAnaliseTec: tipoServico.requerAnaliseTec,\r\n          requerAprovacao: tipoServico.requerAprovacao,\r\n          disponivelPortal: tipoServico.disponivelPortal,\r\n          ativo: tipoServico.ativo !== undefined ? tipoServico.ativo : tipoServico.estado === 'ATIVO'\r\n        });\r\n      } catch (error) {\r\n        console.error('Erro ao carregar tipo de serviço:', error);\r\n        igrpToast({ type: 'error', title: 'Erro ao carregar dados do tipo de serviço. Por favor, tente novamente.' });\r\n      }\r\n    }\r\n  };\r\n\r\n  loadTipoServico();\r\n},[id,getTipoServicoById, igrpToast])\r\n\r\nuseEffect(() => {\r\n  if (onSuvmit){\r\n    console.log(\"Estou gravando o formulario\");\r\n    formformTipoServicoRef.current?.submit();\r\n    afterSubmit();\r\n  }\r\n\r\n},[onSuvmit])"}},"action":{}}},"allowTypes":false,"children":[{"id":"form_tipoServico","tag":"formTipoServico","componentName":"form","label":"Formulário de Tipo de Serviço","type":"group","properties":{"validationMode":"onBlur","gridClassName":"flex flex-col","commonProperties":{"generateReference":false}},"allowTypes":true,"children":[{"id":"columns_tipoServico","tag":"columnsTipoServico","componentName":"columns","label":"Columns","type":"group","properties":{"variant":"cols12","gap":4,"commonProperties":{}},"interactions":{},"allowTypes":false,"data":{},"children":[{"id":"col1_tipoServico","tag":"column1TipoServico","componentName":"column","label":"Column 1","properties":{"variant":"span6"},"interactions":{},"allowTypes":false,"data":{},"children":[{"id":"nome_ts","tag":"nome","componentName":"inputText","label":"Input Text","type":"group","children":[],"interactions":{"onChange":{"type":"function","function":{"type":"function"},"action":{}}},"allowTypes":false,"data":{},"properties":{"label":"Nome","iconProperties":{"showIcon":false},"required":true,"dataProperties":{"isVirtual":false,"isType":true},"commonProperties":{"generateReference":false},"placeholder":"Nome do Tipo de Serviço"},"childProperties":{}},{"id":"codigo_ts","tag":"codigo","componentName":"inputText","label":"Input Text","type":"group","children":[],"interactions":{"onChange":{"type":"function","function":{"type":"function"},"action":{}}},"allowTypes":false,"data":{},"properties":{"label":"Código","iconProperties":{"showIcon":false},"required":true,"dataProperties":{"isVirtual":false,"isType":true},"commonProperties":{"generateReference":false},"placeholder":"Código do Tipo de Serviço"},"childProperties":{}},{"id":"categoriaId_ts","tag":"categoriaId","componentName":"select","label":"Select","type":"group","children":[],"interactions":{"onValueChange":{"type":"function","function":{"fnCustomSet":"() => {}","type":"function"},"action":{}}},"allowTypes":false,"properties":{"label":"Categoria","placeholder":"Selecione uma categoria","options":[],"required":true,"gridSize":"full","dataProperties":{"isVirtual":false,"isType":true},"commonProperties":{"generateReference":false}},"data":{"options":{"state":{"name":"selectCategoriaOptions","type":"IGRPOptionsProps[]","defaultValue":"[]","imports":[],"generate":true}}},"childProperties":{}},{"id":"descricao_ts","tag":"descricao","componentName":"inputTextarea","label":"Textarea","type":"group","children":[],"interactions":{"onChange":{"type":"function","function":{"type":"function"},"action":{}}},"allowTypes":false,"data":{},"properties":{"label":"Descrição","name":"descricao","rows":5,"required":false,"dataProperties":{"isVirtual":false,"isType":true},"commonProperties":{"generateReference":false},"placeholder":"Introduza uma descrição para o tipo de serviço"},"childProperties":{}},{"id":"switch_kyxoqb","tag":"ativo","componentName":"switch","label":"Switch","type":"group","children":[],"interactions":{"checked":{"type":"function","function":{"type":"function"},"action":{}},"onCheckedChange":{"type":"function","function":{"type":"function"},"action":{}}},"allowTypes":false,"data":{},"properties":{"label":"Ativo?","gridSize":"full","commonProperties":{"generateReference":false},"required":false},"childProperties":{}}]},{"id":"col2_tipoServico","tag":"column2TipoServico","componentName":"column","label":"Column 2","properties":{"variant":"span6"},"interactions":{},"allowTypes":false,"data":{},"children":[{"id":"columns_tauboj","tag":"columns1","componentName":"columns","label":"Columns","type":"group","children":[{"id":"column_d7xpnh","tag":"column1","componentName":"column","label":"Column","children":[{"id":"prazoEstimado_ts","tag":"prazoEstimado","componentName":"inputNumber","label":"Number","type":"group","children":[],"interactions":{"onChange":{"type":"function","function":{"type":"function"},"action":{}}},"allowTypes":false,"data":{},"properties":{"label":"Prazo Estimado (dias)","name":"prazoEstimado","min":0,"max":9999999,"step":1,"required":false,"dataProperties":{"isVirtual":false,"isType":true},"commonProperties":{"generateReference":false}},"childProperties":{}}],"interactions":{},"allowTypes":false,"data":{},"properties":{"variant":"span6"}},{"id":"column_2_g32mue","componentName":"column","label":"Column 2","properties":{"variant":"span6"},"children":[{"id":"valorBase_ts","tag":"valorBase","componentName":"inputNumber","label":"Number","type":"group","children":[],"interactions":{"onChange":{"type":"function","function":{"type":"function"},"action":{}}},"allowTypes":false,"data":{},"properties":{"label":"Valor Base (ECV)","name":"valorBase","max":9999999,"step":0.01,"required":false,"dataProperties":{"isVirtual":false,"isType":true},"commonProperties":{"generateReference":false},"min":0},"childProperties":{}}],"interactions":[],"tag":""}],"interactions":{},"allowTypes":false,"data":{},"properties":{"variant":{"default":"cols1","md":"cols2","lg":"cols2"},"gap":4,"commonProperties":{"generateReference":false}},"childProperties":{}},{"id":"columns_3ljy7q","tag":"columns2","componentName":"columns","label":"Columns","type":"group","children":[{"id":"column_gix18c","tag":"column2","componentName":"column","label":"Column","children":[{"id":"switch_a10k4v","tag":"requerVistoria","componentName":"switch","label":"Switch","type":"group","children":[],"interactions":{"checked":{"type":"function","function":{"type":"function"},"action":{}},"onCheckedChange":{"type":"function","function":{"type":"function"},"action":{}}},"allowTypes":false,"data":{},"properties":{"label":"Requer Vistoria?","gridSize":"full","commonProperties":{"generateReference":false}},"childProperties":{}}],"interactions":{},"allowTypes":false,"data":{},"properties":{"variant":{"default":"span1"},"commonProperties":{"generateReference":false}},"childProperties":{}},{"id":"column_2_nv8xqp","componentName":"column","label":"Column 2","properties":{"variant":"span3"},"children":[{"id":"switch_r2606e","tag":"requerAnaliseTec","componentName":"switch","label":"Switch","type":"group","children":[],"interactions":{"checked":{"type":"function","function":{"type":"function"},"action":{}},"onCheckedChange":{"type":"function","function":{"type":"function"},"action":{}}},"allowTypes":false,"data":{},"properties":{"label":"Requer Analise Tecnica?","gridSize":"full","commonProperties":{"generateReference":false}},"childProperties":{}}],"interactions":[],"tag":""},{"id":"column_3_wp3sg6","componentName":"column","label":"Column 3","properties":{"variant":"span3"},"children":[{"id":"switch_kvltux","tag":"requerAprovacao","componentName":"switch","label":"Switch","type":"group","children":[],"interactions":{"checked":{"type":"function","function":{"type":"function"},"action":{}},"onCheckedChange":{"type":"function","function":{"type":"function"},"action":{}}},"allowTypes":false,"data":{},"properties":{"label":"Requer Aprovação?","gridSize":"full","commonProperties":{"generateReference":false}},"childProperties":{}}],"interactions":[],"tag":""},{"id":"column_4_jh5s2c","componentName":"column","label":"Column 4","properties":{"variant":"span3"},"children":[{"id":"switch_3h1zuu","tag":"disponivelPortal","componentName":"switch","label":"Switch","type":"group","children":[],"interactions":{"checked":{"type":"function","function":{"type":"function"},"action":{}},"onCheckedChange":{"type":"function","function":{"type":"function"},"action":{}}},"allowTypes":false,"data":{},"properties":{"label":"Disponivel no Portal?","gridSize":"full","commonProperties":{"generateReference":false}},"childProperties":{}}],"interactions":[],"tag":""}],"interactions":{},"allowTypes":false,"data":{},"properties":{"variant":{"default":"cols1","md":"cols2","lg":"cols4"},"gap":4,"commonProperties":{}}}]}]}],"data":{"defaultValues":{"state":{"id":"b55i32sokz","type":"any","name":"formTipoServicoData","defaultValue":"initFormTipoServico","imports":[],"generate":true}}},"interactions":{"onSubmit":{"type":"function","function":{"fnCustomSet":"(e) => {}","type":"function","fnCustomCode":{"imports":[]},"fnName":"handleSubmit"}}},"dataType":"formTipoServico","childProperties":{}}],"childProperties":{}}}